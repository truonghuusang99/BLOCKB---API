const _0x3b21=['FACE','32047xQSSCO','insertOne','collection','498573JTXsZn','toArray','_id','push','deleteMany','5jLpCtm','519424snVbQe','sort','find','insertedId','features','183651McPNWm','length','56577JuosDo','../database/config','index','150555OKdqVN','BODY','map','37627kxWbXw','3ftPHbK','1opjdwh','mongo','toString','5qvlgyl','exports','insertMany','geometry','MultiPolygon','NODE','createFloor','deleteOne','Polygon','Success','connect','74RiPXpu','floor','block_b','FeatureCollection','coordinates','Gi\x20Cung\x20Duoc\x20Group'];const _0x4cd4=function(_0x1d4519,_0x3c9fac){_0x1d4519=_0x1d4519-0xeb;let _0x3b2142=_0x3b21[_0x1d4519];return _0x3b2142;};const _0x31bb0d=_0x4cd4;(function(_0x28feb9,_0x410eac){const _0x2cee78=_0x4cd4;while(!![]){try{const _0x369905=parseInt(_0x2cee78(0xf0))+parseInt(_0x2cee78(0xfa))*-parseInt(_0x2cee78(0x112))+parseInt(_0x2cee78(0xfd))*-parseInt(_0x2cee78(0xf8))+-parseInt(_0x2cee78(0xf9))*parseInt(_0x2cee78(0xf2))+-parseInt(_0x2cee78(0xf5))*parseInt(_0x2cee78(0x117))+-parseInt(_0x2cee78(0xeb))+parseInt(_0x2cee78(0x108))*parseInt(_0x2cee78(0x10f));if(_0x369905===_0x410eac)break;else _0x28feb9['push'](_0x28feb9['shift']());}catch(_0x3499ab){_0x28feb9['push'](_0x28feb9['shift']());}}}(_0x3b21,0x681fb));const db=require(_0x31bb0d(0xf3));module['exports']['queryDataFloor']=function(){return new Promise(async(_0x15f20d,_0x3c3874)=>{const _0x7ae317=_0x4cd4;try{const _0x2aacc4={'type':_0x7ae317(0x10b),'copyright':_0x7ae317(0x10d),'timestamp':new Date(),'features':[]};await db[_0x7ae317(0xfb)]['connect']();const _0x2e6c79=await db['mongo']['db'](_0x7ae317(0x10a)),_0x44caa8=await _0x2e6c79['collection'](_0x7ae317(0xf6))[_0x7ae317(0xed)]({'graphic:type':{'$eq':_0x7ae317(0x109)}})['toArray']();for(let _0x2ac224=0x0;_0x2ac224<_0x44caa8[_0x7ae317(0xf1)];_0x2ac224++){_0x44caa8[_0x2ac224][_0x7ae317(0x114)][_0x7ae317(0xfc)]();let _0x545a13=await _0x2e6c79['collection'](_0x7ae317(0x10e))[_0x7ae317(0xed)]({'id_body':_0x44caa8[_0x2ac224][_0x7ae317(0x114)][_0x7ae317(0xfc)]()})['toArray'](),_0x3dfb07={'type':'Feature','properties':_0x44caa8[_0x2ac224],'geometry':{'type':_0x545a13[_0x7ae317(0xf1)]>0x1?_0x7ae317(0x101):_0x7ae317(0x105),'coordinates':[]}};for(let _0x487d3a of _0x545a13){let _0x58726c=await(await _0x2e6c79[_0x7ae317(0x111)](_0x7ae317(0x102))[_0x7ae317(0xed)]({'id_face':_0x487d3a['_id'][_0x7ae317(0xfc)]()})[_0x7ae317(0xec)]([_0x7ae317(0xf4)],0x1)[_0x7ae317(0x113)]())[_0x7ae317(0xf7)](_0x1fbccc=>{return[_0x1fbccc['x'],_0x1fbccc['y'],_0x1fbccc['z']];});_0x3dfb07[_0x7ae317(0x100)][_0x7ae317(0x10c)][_0x7ae317(0x115)](_0x58726c);}_0x2aacc4[_0x7ae317(0xef)][_0x7ae317(0x115)](_0x3dfb07);}_0x15f20d(_0x2aacc4);}catch(_0x3ec5f9){_0x15f20d({'error':_0x3ec5f9});throw _0x3ec5f9;}});},module[_0x31bb0d(0xfe)][_0x31bb0d(0x103)]=function(_0x49888e,_0x246504){return new Promise(async(_0x59eb49,_0xd9f601)=>{const _0x1047d0=_0x4cd4;try{await db[_0x1047d0(0xfb)]['connect']();const _0x45ccdb=await db[_0x1047d0(0xfb)]['db'](_0x1047d0(0x10a)),_0x3e8180=await _0x45ccdb['collection'](_0x1047d0(0xf6))['insertOne'](_0x49888e);for(let _0xb844a9 in _0x246504){let _0x44e2c6=await _0x45ccdb['collection']('FACE')[_0x1047d0(0x110)]({'id_body':_0x3e8180[_0x1047d0(0xee)]['toString']()}),_0x14e9b3=_0x246504[_0xb844a9][_0x1047d0(0xf7)]((_0x4b8a39,_0x5013eb)=>{const _0x15219b=_0x1047d0;return{'x':_0x4b8a39[0x0],'y':_0x4b8a39[0x1],'z':_0x4b8a39[0x2],'index':_0x5013eb,'id_face':_0x44e2c6[_0x15219b(0xee)][_0x15219b(0xfc)]()};});await _0x45ccdb[_0x1047d0(0x111)](_0x1047d0(0x102))[_0x1047d0(0xff)](_0x14e9b3);}_0x59eb49({'id_body':_0x3e8180[_0x1047d0(0xee)]});}catch(_0x57ca93){_0x59eb49(_0x57ca93);}});},module['exports']['deleteFloor']=function(_0x5b55f7){return new Promise(async(_0x590bc4,_0x44925d)=>{const _0x2df5f9=_0x4cd4;try{await db['mongo'][_0x2df5f9(0x107)]();const _0x33d1b0=await db['mongo']['db']('block_b');await _0x33d1b0['collection'](_0x2df5f9(0xf6))[_0x2df5f9(0x104)]({'_id':ObjectId(_0x5b55f7)});const _0x147cbf=await _0x33d1b0[_0x2df5f9(0x111)]('FACE')[_0x2df5f9(0xed)]({'id_body':_0x5b55f7[_0x2df5f9(0xfc)]()})[_0x2df5f9(0x113)]();for(let _0x51fedc of _0x147cbf){await _0x33d1b0[_0x2df5f9(0x111)](_0x2df5f9(0x102))[_0x2df5f9(0x116)]({'id_face':_0x51fedc[_0x2df5f9(0x114)][_0x2df5f9(0xfc)]()}),await _0x33d1b0[_0x2df5f9(0x111)](_0x2df5f9(0x10e))[_0x2df5f9(0x104)]({'_id':_0x51fedc[_0x2df5f9(0x114)]});}_0x590bc4(_0x2df5f9(0x106));}catch(_0x547544){_0x44925d(err);}});};