const _0x8eda=['features','_id','insertOne','createElevator','376478GyuYJH','exports','deleteOne','elevator','Success','queryDataElevator','index','collection','Polygon','mongo','map','296621FosVAB','../database/config','push','7236PBrcsW','297257JqXron','3057ZKROBl','3BNUxvf','connect','block_b','toString','find','57mADZaR','insertedId','839265tDQAdb','deleteMany','toArray','MultiPolygon','72dhpSUt','1AwSBog','FeatureCollection','NODE','insertMany','BODY','158719NjuXxM','FACE','geometry','sort','length','Feature'];const _0x19e9=function(_0x101535,_0x4abfda){_0x101535=_0x101535-0xa0;let _0x8eda3a=_0x8eda[_0x101535];return _0x8eda3a;};const _0x20894b=_0x19e9;(function(_0x281304,_0x44fa26){const _0x3cf945=_0x19e9;while(!![]){try{const _0x22e6a1=-parseInt(_0x3cf945(0xb7))*parseInt(_0x3cf945(0xbd))+-parseInt(_0x3cf945(0xa7))+-parseInt(_0x3cf945(0xb8))*-parseInt(_0x3cf945(0xb2))+parseInt(_0x3cf945(0xc4))*parseInt(_0x3cf945(0xb6))+parseInt(_0x3cf945(0xc3))*parseInt(_0x3cf945(0xb5))+parseInt(_0x3cf945(0xc9))+-parseInt(_0x3cf945(0xbf));if(_0x22e6a1===_0x44fa26)break;else _0x281304['push'](_0x281304['shift']());}catch(_0xb7cfd4){_0x281304['push'](_0x281304['shift']());}}}(_0x8eda,0x746a7));const db=require(_0x20894b(0xb3));module[_0x20894b(0xa8)][_0x20894b(0xac)]=function(){return new Promise(async(_0x4f1584,_0x2ea494)=>{const _0x21a3e1=_0x19e9;try{const _0x5ac561={'type':_0x21a3e1(0xc5),'copyright':'Gi\x20Cung\x20Duoc\x20Group','timestamp':new Date(),'features':[]};await db[_0x21a3e1(0xb0)][_0x21a3e1(0xb9)]();const _0x50e07a=await db[_0x21a3e1(0xb0)]['db']('block_b'),_0x2472df=await _0x50e07a[_0x21a3e1(0xae)](_0x21a3e1(0xc8))[_0x21a3e1(0xbc)]({'graphic:type':{'$eq':_0x21a3e1(0xaa)}})[_0x21a3e1(0xc1)]();for(let _0x10fd62=0x0;_0x10fd62<_0x2472df[_0x21a3e1(0xa1)];_0x10fd62++){_0x2472df[_0x10fd62]['_id'][_0x21a3e1(0xbb)]();let _0x216e55=await _0x50e07a[_0x21a3e1(0xae)]('FACE')['find']({'id_body':_0x2472df[_0x10fd62][_0x21a3e1(0xa4)][_0x21a3e1(0xbb)]()})[_0x21a3e1(0xc1)](),_0x26ae15={'type':_0x21a3e1(0xa2),'properties':_0x2472df[_0x10fd62],'geometry':{'type':_0x216e55[_0x21a3e1(0xa1)]>0x1?_0x21a3e1(0xc2):_0x21a3e1(0xaf),'coordinates':[]}};for(let _0x575dd2 of _0x216e55){let _0x292880=await(await _0x50e07a[_0x21a3e1(0xae)]('NODE')[_0x21a3e1(0xbc)]({'id_face':_0x575dd2['_id'][_0x21a3e1(0xbb)]()})[_0x21a3e1(0xa0)]([_0x21a3e1(0xad)],0x1)['toArray']())[_0x21a3e1(0xb1)](_0x4c71bc=>{return[_0x4c71bc['x'],_0x4c71bc['y'],_0x4c71bc['z']];});_0x26ae15[_0x21a3e1(0xcb)]['coordinates']['push'](_0x292880);}_0x5ac561[_0x21a3e1(0xa3)][_0x21a3e1(0xb4)](_0x26ae15);}_0x4f1584(_0x5ac561);}catch(_0x2461d2){_0x4f1584({'error':_0x2461d2});throw _0x2461d2;}});},module['exports'][_0x20894b(0xa6)]=function(_0x1b5f80,_0x2e2749){return new Promise(async(_0x55673f,_0x114dcb)=>{const _0x1866a8=_0x19e9;try{await db['mongo']['connect']();const _0x49670c=await db[_0x1866a8(0xb0)]['db'](_0x1866a8(0xba)),_0x4b01fc=await _0x49670c[_0x1866a8(0xae)](_0x1866a8(0xc8))[_0x1866a8(0xa5)](_0x1b5f80);for(let _0x1a7b32 in _0x2e2749){let _0x5d2336=await _0x49670c[_0x1866a8(0xae)](_0x1866a8(0xca))[_0x1866a8(0xa5)]({'id_body':_0x4b01fc[_0x1866a8(0xbe)][_0x1866a8(0xbb)]()}),_0x525a49=_0x2e2749[_0x1a7b32][_0x1866a8(0xb1)]((_0x116037,_0x1116b8)=>{const _0x43dbeb=_0x1866a8;return{'x':_0x116037[0x0],'y':_0x116037[0x1],'z':_0x116037[0x2],'index':_0x1116b8,'id_face':_0x5d2336['insertedId'][_0x43dbeb(0xbb)]()};});await _0x49670c[_0x1866a8(0xae)](_0x1866a8(0xc6))[_0x1866a8(0xc7)](_0x525a49);}_0x55673f({'id_body':_0x4b01fc[_0x1866a8(0xbe)]});}catch(_0x1780ae){_0x55673f(_0x1780ae);}});},module['exports']['deleteElevator']=function(_0x363c30){return new Promise(async(_0x235605,_0x3e155b)=>{const _0x17bff0=_0x19e9;try{await db['mongo']['connect']();const _0x408876=await db['mongo']['db'](_0x17bff0(0xba));await _0x408876['collection'](_0x17bff0(0xc8))[_0x17bff0(0xa9)]({'_id':ObjectId(_0x363c30)});const _0x2ebf59=await _0x408876[_0x17bff0(0xae)]('FACE')[_0x17bff0(0xbc)]({'id_body':_0x363c30[_0x17bff0(0xbb)]()})[_0x17bff0(0xc1)]();for(let _0x224acb of _0x2ebf59){await _0x408876[_0x17bff0(0xae)](_0x17bff0(0xc6))[_0x17bff0(0xc0)]({'id_face':_0x224acb[_0x17bff0(0xa4)][_0x17bff0(0xbb)]()}),await _0x408876[_0x17bff0(0xae)](_0x17bff0(0xca))[_0x17bff0(0xa9)]({'_id':_0x224acb['_id']});}_0x235605(_0x17bff0(0xab));}catch(_0x1e6a43){_0x3e155b(err);}});};