const _0x3b56=['deleteDoor','coordinates','14126LvSNdH','push','1644517gRoeGX','2095ImsGSB','31nJbQdL','1249307IEKiKk','MultiLineString','toArray','toString','map','1547655CWqohQ','block_b','FACE','insertOne','Gi\x20Cung\x20Duoc\x20Group','NODE','500374wHyNVq','index','deleteMany','_id','sort','75ePXkkE','Success','collection','FeatureCollection','63mpwxPq','door','deleteOne','35929wZvCxj','exports','insertedId','features','createDoor','find','mongo','connect','geometry','insertMany','SURFACE'];const _0x47d1=function(_0x17f2b7,_0x32885d){_0x17f2b7=_0x17f2b7-0xe4;let _0x3b5600=_0x3b56[_0x17f2b7];return _0x3b5600;};const _0x2c16b8=_0x47d1;(function(_0x5cdc6f,_0x353671){const _0x460a8c=_0x47d1;while(!![]){try{const _0x4e7dbe=parseInt(_0x460a8c(0xe4))+parseInt(_0x460a8c(0x10c))*-parseInt(_0x460a8c(0x108))+-parseInt(_0x460a8c(0xef))+parseInt(_0x460a8c(0xe9))+-parseInt(_0x460a8c(0xf8))*-parseInt(_0x460a8c(0x10b))+parseInt(_0x460a8c(0x10a))+parseInt(_0x460a8c(0xf4))*-parseInt(_0x460a8c(0xfb));if(_0x4e7dbe===_0x353671)break;else _0x5cdc6f['push'](_0x5cdc6f['shift']());}catch(_0x45f586){_0x5cdc6f['push'](_0x5cdc6f['shift']());}}}(_0x3b56,0xe59dd));const db=require('../database/config');module[_0x2c16b8(0xfc)]['queryDataDoor']=function(_0x865a4b){return new Promise(async(_0x3b1744,_0x296378)=>{const _0x19cba8=_0x47d1;try{const _0x4beec8={'type':_0x19cba8(0xf7),'copyright':_0x19cba8(0xed),'timestamp':new Date(),'features':[]};await db[_0x19cba8(0x101)][_0x19cba8(0x102)]();const _0x162e37=await db[_0x19cba8(0x101)]['db'](_0x19cba8(0xea)),_0x7d030f=await _0x162e37[_0x19cba8(0xf6)](_0x19cba8(0x105))['find']({'graphic:type':{'$eq':_0x19cba8(0xf9)},'graphic:height':{'$eq':_0x865a4b}})[_0x19cba8(0xe6)]();for(let _0x56e5e8=0x0;_0x56e5e8<_0x7d030f['length'];_0x56e5e8++){_0x7d030f[_0x56e5e8][_0x19cba8(0xf2)][_0x19cba8(0xe7)]();let _0x5b5bf3=await _0x162e37['collection'](_0x19cba8(0xeb))[_0x19cba8(0x100)]({'id_surface':_0x7d030f[_0x56e5e8][_0x19cba8(0xf2)]['toString']()})[_0x19cba8(0xe6)](),_0x2aa6ed={'type':'Feature','properties':_0x7d030f[_0x56e5e8],'geometry':{'type':_0x19cba8(0xe5),'coordinates':[]}};for(let _0x3dc368 of _0x5b5bf3){let _0x2545ba=await(await _0x162e37[_0x19cba8(0xf6)](_0x19cba8(0xee))[_0x19cba8(0x100)]({'id_face':_0x3dc368[_0x19cba8(0xf2)][_0x19cba8(0xe7)]()})[_0x19cba8(0xf3)]([_0x19cba8(0xf0)],0x1)['toArray']())[_0x19cba8(0xe8)](_0x254f39=>{return[_0x254f39['x'],_0x254f39['y'],_0x254f39['z']];});_0x2aa6ed[_0x19cba8(0x103)][_0x19cba8(0x107)][_0x19cba8(0x109)](_0x2545ba);}_0x4beec8[_0x19cba8(0xfe)]['push'](_0x2aa6ed);}_0x3b1744(_0x4beec8);}catch(_0x4817ec){_0x3b1744({'error':_0x4817ec});throw _0x4817ec;}});},module[_0x2c16b8(0xfc)][_0x2c16b8(0xff)]=function(_0x3a5786,_0x2adce4){return new Promise(async(_0x3e8047,_0x33aa0b)=>{const _0x22d470=_0x47d1;try{await db['mongo'][_0x22d470(0x102)]();const _0x349b96=await db[_0x22d470(0x101)]['db'](_0x22d470(0xea)),_0x22bf08=await _0x349b96[_0x22d470(0xf6)](_0x22d470(0x105))[_0x22d470(0xec)](_0x3a5786);for(let _0x2b6f8b in _0x2adce4){let _0xa2dfa2=await _0x349b96['collection'](_0x22d470(0xeb))['insertOne']({'id_surface':_0x22bf08['insertedId'][_0x22d470(0xe7)]()}),_0x1b2380=_0x2adce4[_0x2b6f8b][_0x22d470(0xe8)]((_0x533e6b,_0x3b6afe)=>{const _0x5d9639=_0x22d470;return{'x':_0x533e6b[0x0],'y':_0x533e6b[0x1],'z':_0x533e6b[0x2],'index':_0x3b6afe,'id_face':_0xa2dfa2['insertedId'][_0x5d9639(0xe7)]()};});await _0x349b96[_0x22d470(0xf6)](_0x22d470(0xee))[_0x22d470(0x104)](_0x1b2380);}_0x3e8047({'id_surface':_0x22bf08[_0x22d470(0xfd)]});}catch(_0x9a62bf){_0x3e8047(_0x9a62bf);}});},module[_0x2c16b8(0xfc)][_0x2c16b8(0x106)]=function(_0x17a17c){return new Promise(async(_0x552373,_0x3d036c)=>{const _0x617fc9=_0x47d1;try{await db[_0x617fc9(0x101)][_0x617fc9(0x102)]();const _0xde9933=await db[_0x617fc9(0x101)]['db'](_0x617fc9(0xea));await _0xde9933[_0x617fc9(0xf6)](_0x617fc9(0x105))['deleteOne']({'_id':_0x17a17c});const _0x14981d=await _0xde9933['collection']('FACE')['find']({'id_surface':_0x17a17c['toString']()})[_0x617fc9(0xe6)]();for(let _0x4e2246 of _0x14981d){await _0xde9933['collection'](_0x617fc9(0xee))[_0x617fc9(0xf1)]({'id_face':_0x4e2246[_0x617fc9(0xf2)][_0x617fc9(0xe7)]()}),await _0xde9933[_0x617fc9(0xf6)](_0x617fc9(0xeb))[_0x617fc9(0xfa)]({'_id':_0x4e2246[_0x617fc9(0xf2)]});}_0x552373(_0x617fc9(0xf5));}catch(_0x3f742b){_0x3d036c(_0x3f742b);}});};